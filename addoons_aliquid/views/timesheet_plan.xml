<odoo>
    <template id="aliquid_plan" name="aliquid timesheet plan" inherit_id="sale_timesheet.timesheet_plan">
        <xpath expr="//div/div/div/div/div[hasclass('o_project_plan_project_timesheet_forecast')]/t/div/table/tbody" position="replace">
            <tbody>
                <t t-set="row_is_milestone" t-value="False"/>
                <t t-foreach="timesheet_forecast_table['rows']" t-as="row">
                    <t t-set="row_type" t-value="row[0].get('type')"/>
                    <t t-if="row_type == 'sale_order_line'">
                        <t t-set="row_is_milestone" t-value="row[0].get('is_milestone')"/>
                    </t>
                    <tr t-att-class="'o_timesheet_forecast_' + row_type">
                        <t t-foreach="row" t-as="row_value">
                            <td t-att-class="'o_right_bordered' if row_value_index in [5,10] else '' + ' text-center' if row_value_index != 0 else ''">
                                <t t-if="row_value_index == 0">
                                    <t t-if="row_type == 'sale_order'">
                                        <a t-att-data-oe-model="row_value['res_model']" t-att-data-oe-id="row_value['res_id']" t-att-class="'o_timesheet_plan_redirect' if row_value['res_id'] else ''">
                                            <t t-esc="row_value.get('label')"/>
                                        </a>
                                    </t>
                                    <t t-if="row_type != 'sale_order'">
                                        <t t-if="not row_is_milestone">
                                            <span><t t-esc="row_value.get('label')"/></span>
                                        </t>
                                        <t t-if="row_is_milestone">
                                            <span><i><t t-esc="row_value.get('label')"/></i></span>
                                        </t>
                                    </t>
                                </t>
                                <t t-if="row_value_index != 0">
                                    <t t-if="row_value_index == 6">
                                        <span style="text-align:right"><t t-esc="round(row_value, 2)"/></span>
                                    </t>
                                    <t t-else="">
                                        <t t-if="row_value_index &lt; len(row)-2">
                                            <t t-if="row_is_milestone">
                                                <i t-att-class="'text-muted' if not row_value else ''"><t t-esc="row_value" t-options="{'widget': 'float_time'}"/></i>
                                            </t>
                                            <t t-else="">
                                                <span t-att-class="'text-muted' if not row_value else ''"><t t-esc="row_value" t-options="{'widget': 'float_time'}"/></span>
                                            </t>
                                        </t>
                                        <t t-else="">
                                            <t t-if="not row_is_milestone and not row[0].get('type') == 'hr_employee'">
                                                <span t-att-class="'text-muted' if not row_value else ''"><t t-esc="row_value" t-options="{'widget': 'float_time'}"/></span>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </td>
                        </t>
                    </tr>
                </t>
            </tbody>
        </xpath>
    </template>
</odoo>
